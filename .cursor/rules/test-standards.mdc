---
description: Test writing standards (AAA, BDD, asset management)
globs: test/**/*.ts, src/**/*.spec.ts
alwaysApply: false
---

# Test Standards

## AAA Markers (mandatory)

Every test case MUST include these comment markers:

```typescript
test('should return sum when given two numbers', () => {
  // Arrange
  const a = 1, b = 2;
  // Act
  const result = add(a, b);
  // Assert
  expect(result).toBe(3);
});
```

## BDD Title Format

Test titles MUST be string literals in `"should ... when ..."` form:

- GOOD: `"should return 404 when user not found"`
- BAD: `"test user not found"`, `"returns 404"`

## Test Asset Management

1. **Scoped-first**: create `helpers/`, `stubs/`, `fixtures/` inside the test directory.
2. **Shared promotion**: only move to `test/integration/shared/` when reused by 2+ features AND the API is stable.
3. **No business logic** in stubs/fixtures (input generation and external I/O replacement only).
